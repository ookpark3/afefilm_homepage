<!doctype html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="./asset/main/AFE logo.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="./style.css" />
    <link rel="stylesheet" href="./index.css" />
    <link
      rel="stylesheet"
      as="style"
      crossorigin
      href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/variable/pretendardvariable.min.css"
    />
    <title>AFE | Home</title>
  </head>
  <body>
    <!-- 로딩페이지 -->
    <div id="loading-page" class="loading-page">
      <div class="big-circle">
        <h1 class="title">alien from earth</h1>
        <div class="orbit">
          <div class="green-circle orbital"></div>
          <div class="purple-circle orbital"></div>
          <div class="sky-circle orbital"></div>
        </div>
      </div>
    </div>
    <!-- 헤더 페이지 -->
    <header class="header" aria-label="헤더 페이지">
      <div class="header-logo">
        <a href="./index.html">
          <img src="./asset/main/AFE logo.png" alt="AFE logo" />
        </a>
      </div>
      <div class="header-menu">
        <div class="header-menu-item-1">
          <div class="header-menu-item-1-1">
            <a href="./about.html">About</a>
          </div>
          <div class="header-menu-item-1-2">
            <a href="./work.html">Work</a>
          </div>
          <div class="header-menu-item-1-3">
            <a href="./contact.html">Contact</a>
          </div>
        </div>
        <div class="header-menu-item-2">
          <a href="https://bit.ly/3yJX7NL" class="header-menu-item-2-2">
            <span class="header-menu-item-2-1">회사소개서</span>
            <img
              src="./asset/main/material-symbols-light_download.svg"
              alt="Vector"
            />
          </a>
        </div>
      </div>
    </header>
    <!-- 메인 페이지 -->
    <main aria-label="메인 페이지">
      <!-- 랜딩 요소 페이지 1 메인 타이틀, 로딩페이지로 통합 -->

      <!-- 랜딩 요소 페이지 2 영상 쇼릴등장 -->
      <section class="main-2 section" aria-label="영상 쇼릴 페이지">
        <video
          class="main-2-1"
          src="./asset/main/AFE Promotion.mp4"
          autoplay
          muted
          loop
        ></video>
      </section>
      <!-- 랜딩 요소 페이지 3 what we do? 페이지 -->
      <section class="main-3 section" aria-label="What we do? 페이지">
        <div class="main-3-1">
          <h2 class="main-3-1-1">What we do?</h2>
          <p class="main-3-1-2">
            AFE는 트렌디한 영상미를 기반으로 <br />광고, 홍보 영상, 다큐멘터리,
            아트 필름을 제작하는 영상 프로덕션입니다 <br />현재 영상 프로덕션
            뿐만 아니라 렌일, 종합 마케팅 사업까지 확장해 나가고 있습니다
          </p>
          <p class="main-3-1-3">
            AFE is a video production company that creates advertisements,
            <br />promotional videos, documentaries, and art films based on
            trendy visuals. <br />Currently, we are expanding our business
            beyond video production to include <br />rental services and
            comprehensive marketing solutions.
          </p>
        </div>
      </section>
      <hr class="section-divider" aria-label="섹션 구분선" />
      <!-- 랜딩 요소 페이지 4 Our Services 페이지 -->
      <section class="main-4 section" aria-label="Our Services 페지">
        <h2 class="main-4-1">Our Services</h2>
        <div class="main-4-2">
          <a href="./about.html#film-production" class="main-4-2-1"
            >film production</a
          >
          <a href="./about.html#rental-anchor" class="main-4-2-2">rental</a>
          <a href="./about.html#marketing-anchor" class="main-4-2-3"
            >marketing</a
          >
          <a onclick="alert('홈페이지 리뉴얼작업 중입니다.')" class="main-4-2-4"
            >academy</a
          >
        </div>
      </section>
      <hr class="section-divider" aria-label="섹션 구분선" />
      <!-- 랜딩 요소 페이지 5 Our Work 페이지 -->
      <section class="main-5 section" aria-label="Our Work 페이지">
        <div class="main-5-1">
          <h2 class="main-5-1-1">Our Work</h2>
          <div class="main-5-1-2">
            <div class="main-5-1-2-1 video-container">
              <img
                src="./asset/main/main-5-1-2/1.png"
                alt="Video thumbnail"
                class="video-thumbnail"
              />
              <div class="play-button">
                <svg
                  class="play-icon"
                  width="64"
                  height="64"
                  viewBox="0 0 64 64"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <circle
                    cx="32"
                    cy="32"
                    r="32"
                    fill="#F8F9FA"
                    fill-opacity="0.5"
                  />
                  <path d="M44 32L26 42L26 22L44 32Z" fill="#111111" />
                </svg>
              </div>
              <iframe
                src="https://player.vimeo.com/video/992047192?badge=0&amp;autopause=0&amp;player_id=vimeo-player&amp;app_id=58479"
                frameborder="0"
                allow="autoplay; fullscreen; picture-in-picture; clipboard-write"
                title="금난새"
                class="video-iframe"
                id="vimeo-player"
              ></iframe>
            </div>
          </div>

          <div class="main-5-1-3">
            <img src="./asset/main/Ellipse 5.svg" alt="2번이미지" />
            <img src="./asset/main/Ellipse 6.svg" alt="2번이미지" />
            <img src="./asset/main/Ellipse 6.svg" alt="2번이미지" />
            <img src="./asset/main/Ellipse 6.svg" alt="2번이미지" />
          </div>

          <div
            class="main-5-1-4"
            onclick="alert('홈페이지 리뉴얼작업 중입니다.')"
          >
            <p>View more</p>
          </div>
        </div>
      </section>
      <hr class="section-divider" aria-label="섹션 구분선" />
      <!-- 랜딩 요소 디자인 페이지 6 Client 페이지 -->
      <section class="main-6 section" aria-label="Client 페이지">
        <h2 class="main-6-1">Client</h2>
        <div class="main-6-2">
          <div class="scroll-container scroll-container-1">
            <img
              src="./asset/main/main-6-2-1.png"
              alt="Client logo"
              class="scroll-image"
            />
            <img
              src="./asset/main/main-6-2-1.png"
              alt="Client logo"
              class="scroll-image"
            />
          </div>
          <div class="scroll-container scroll-container-2">
            <img
              src="./asset/main/main-6-2-2.png"
              alt="Client logo"
              class="scroll-image"
            />
            <img
              src="./asset/main/main-6-2-2.png"
              alt="Client logo"
              class="scroll-image"
            />
          </div>
        </div>
      </section>
    </main>
    <!-- 푸터 페이지 -->
    <footer class="footer" aria-label="푸터 페이지">
      <div class="footer-1">
        <div class="footer-1-1">
          <p>에이에프이 (AFE)</p>
          <p>대표 : 박세형</p>
          <p>사업자번호 : 133-16-01692</p>
          <p>메일 : afefilm82@gmail.com</p>
          <p>대표전화 : 070-8800-0401</p>
        </div>
        <div class="footer-1-2">
          <div class="footer-1-2-1">
            <p>
              부산광역시 해운대구 세실로 33 B1<br />
              서울특별시 강남구 테헤란로25길 46 서울빌딩 2층 (파이브스팟 역삼)
            </p>
            <p>
              33, Sesil-ro, Haeundae-gu, Busan, Republic of Korea 46,<br />
              Teheran-ro 25-gil, Gangnam-gu, Seoul, Republic of Korea
            </p>
          </div>
          <div class="footer-1-2-2">
            <p>copyright 2024. AFE. All rights reserved</p>
          </div>
        </div>
      </div>
    </footer>
    <!-- 로딩 스크립트 -->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const loadingPage = document.getElementById('loading-page');
        const orbitals = document.querySelectorAll('.orbital');
        const bigCircle = document.querySelector('.big-circle');
        const body = document.body;
        const mainVideo = document.querySelector('.main-2-1');

        // 초기에 body에 no-scroll 클래스 추가
        body.classList.add('no-scroll');

        function animate(time) {
          const radius = bigCircle.offsetWidth / 2;

          orbitals.forEach((orbital, index) => {
            const angle =
              (time * 0.0003 + index * ((Math.PI * 2) / 3)) % (Math.PI * 2);
            const x = Math.cos(angle) * radius;
            const y = Math.sin(angle) * radius;

            const offsetX = orbital.offsetWidth / 2;
            const offsetY = orbital.offsetHeight / 2;

            orbital.style.transform = `translate(${x}px, ${y}px) translate(-${offsetX}px, -${offsetY}px)`;
          });

          requestAnimationFrame(animate);
        }

        requestAnimationFrame(animate);

        // 최소 1초 대기를 위한 Promise
        const minWaitPromise = new Promise((resolve) =>
          setTimeout(resolve, 1000),
        );

        // 비디오 로딩 완료를 위한 Promise
        const videoLoadPromise = new Promise((resolve) => {
          if (mainVideo.readyState >= 3) {
            resolve();
          } else {
            mainVideo.addEventListener('canplay', resolve);
          }
        });

        // 두 Promise가 모두 완료될 때까지 대기
        Promise.all([minWaitPromise, videoLoadPromise]).then(() => {
          loadingPage.classList.add('hidden');
          // no-scroll 클래스 제거하여 스크롤 허용
          body.classList.remove('no-scroll');
        });
      });
    </script>
    <!-- 섹션 스크립트 -->
    <script>
      function debounce(func, wait) {
        let timeout;
        return function executedFunction(...args) {
          const later = () => {
            clearTimeout(timeout);
            func(...args);
          };
          clearTimeout(timeout);
          timeout = setTimeout(later, wait);
        };
      }

      const observer = new IntersectionObserver(
        debounce((entries) => {
          entries.forEach((entry) => {
            if (
              entry.isIntersecting &&
              !entry.target.classList.contains('visible')
            ) {
              entry.target.classList.add('visible');
              observer.unobserve(entry.target); // 한 번 보이면 관찰 중지
            }
          });
        }, 25), // 50ms 디바운스
        {
          threshold: [0, 0.25, 0.5, 0.75, 1],
          rootMargin: '-20% 0px -20% 0px',
        },
      );

      document.querySelectorAll('.section').forEach((section) => {
        observer.observe(section);
      });
    </script>

    <script src="https://player.vimeo.com/api/player.js"></script>
    <!-- 비디오 클릭시 플레이 버튼 숨기기 -->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const videoContainer = document.querySelector('.video-container');
        const playButton = document.querySelector('.play-button');
        const videoThumbnail = document.querySelector('.video-thumbnail');
        const iframe = document.querySelector('.video-iframe');

        // Vimeo Player 초기화
        const player = new Vimeo.Player(iframe);

        playButton.addEventListener('click', function (e) {
          e.stopPropagation();

          // 즉시 비디오 재생 시작
          player.play().catch((error) => {
            console.error('비디오 재생 중 오류 발생:', error);
          });

          // 트랜지션이 끝난 후 요소들을 완전히 숨김
          setTimeout(() => {
            videoThumbnail.style.display = 'none';
            playButton.style.display = 'none';
          }, 1000); // 4초(대기) + 0.25초(트랜지션) = 4.25초
        });

        videoContainer.addEventListener('click', function (e) {
          e.stopPropagation();
        });
      });
    </script>

    <!-- 로고 가로로 무한스크롤 -->
    <script>
      function setupInfiniteScroll() {
        const container = document.querySelector('.scroll-container');
        const images = container.querySelectorAll('.scroll-image');

        if (images.length !== 2) {
          console.error('Infinite scroll requires exactly two images');
          return;
        }

        const imageWidth = images[0].offsetWidth;
        let scrollPosition = 0;

        function scroll() {
          scrollPosition -= 1; // 스크롤 속도 조절 (숫자를 변경하여 속도 조절 가능)

          if (scrollPosition <= -imageWidth) {
            scrollPosition += imageWidth;
          }

          container.style.transform = `translateX(${scrollPosition}px)`;
          requestAnimationFrame(scroll);
        }

        requestAnimationFrame(scroll);
      }

      // 페이지 로드 시 함수 실행
      window.addEventListener('load', setupInfiniteScroll);
    </script>
    <!-- 헤더 스크롤되면 배경색 변경 -->
    <script>
      document.addEventListener('DOMContentLoaded', function () {
        const header = document.querySelector('.header');
        const main = document.querySelector('main');
        let lastScrollY = 0;

        function updateHeader(scrollY) {
          const headerHeight = header.offsetHeight;
          const mainTop = main.offsetTop;
          const scrollDistance = window.innerHeight * 0.5; // 뷰포트 높이를 사용

          // 스크롤 진행도를 0에서 1 사이의 값으로 계산
          const scrollProgress = Math.max(
            0,
            Math.min(scrollY / scrollDistance, 1),
          );

          // 배경색의 알파값을 설정
          const alpha = scrollProgress.toFixed(2);
          header.style.backgroundColor = `rgba(17, 17, 17, ${alpha})`;

          console.log(
            `Scroll position: ${scrollY}px, Progress: ${scrollProgress.toFixed(2)}, Alpha: ${alpha}`,
          );
        }

        // 초기 로드 시 헤더 배경을 투명하게 설정
        header.style.backgroundColor = 'rgba(17, 17, 17, 0)';

        // 스크롤 이벤트 리스너
        window.addEventListener('scroll', function () {
          updateHeader(window.scrollY);
        });

        // 초기 상태 설정
        updateHeader(window.scrollY);
      });
    </script>
  </body>
</html>
